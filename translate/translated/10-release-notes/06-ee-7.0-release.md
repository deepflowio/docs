---
title: v7.0 EE Release Notes
permalink: /release-notes/release-7.0-ee
---

> This document was translated by ChatGPT

# Business and Applications

## Business Observability

- (New UI) Added automatic correlation display of system metrics, events, and application logs in the right-slide page.
- Usability improvements
  - Added `Metrics Analysis` capability to the right-slide page for quick classification and comparison of application and network performance metrics.
  - (New UI) Optimized the usability of business definition operations, supporting drag-and-drop to define services in the topology.

## Application Observability

- AutoTracing
  - ⭐ Support for RocketMQ protocol collection and tracing, [Documentation](../features/l7-protocols/mq/#rocketmq).
  - ⭐ Support for Tars protocol collection and tracing, [Documentation](../features/l7-protocols/rpc/#tars).
  - Support for Ping protocol collection and tracing, [Documentation](../features/l7-protocols/network/#ping).
  - Support for Dubbo protocol collection and tracing when using Fastjson serialization, [Documentation](../features/l7-protocols/rpc/#dubbo).
  - Support for parsing compressed MySQL calls, [Documentation](../configuration/agent/#processors.request_log.application_protocol_inference.protocol_special_config.mysql.decompress_payload).
  - Support for parsing MySQL Login Response statements and truncated MySQL protocol content.
  - Optimized parsing of unary-type gRPC calls, [Documentation](../configuration/agent/#processors.request_log.application_protocol_inference.protocol_special_config.grpc.streaming_data_enabled).
  - Support for parsing multiple DNS requests in TCP Payload, and parsing SRV-type DNS call logs, [Documentation](https://en.wikipedia.org/wiki/SRV_record).
  - Support for collecting Unix Socket call logs, and automatic tracing between TCP/UDP Socket call logs and Unix Socket call logs.
  - Enriched eBPF hook points for file read/write event collection to improve adaptability.
  - Support for parsing TraceID and SpanID from Borui and Yunzhihui APM.
  - Support for cross-thread analysis of the parent Span of the current Span (system Span at the client process location).
- AutoMetrics
  - Added timeout ratio metric (`timeout_ratio`) to application performance metrics (`application`, `application_map`).
- AutoTagging
  - ⭐ Optimized the meaning of the `process_kname` field in call logs and file read/write event data, changing from `kernel thread name` to `system process` name for better readability.
  - ⭐ Optimized the meaning of the `response_status` field in call logs and improved page prompt information.
    - **Normal**: Response code is normal.
    - **Client Error**: Response code indicates a client-side error, e.g., HTTP 4XX.
    - **Server Error**: Response code indicates a server-side error, e.g., HTTP 5XX.
    - **Timeout**: If no response is collected within a certain time, the request is marked as timed out.
      - Collector `Application Session Merge Timeout Setting`: DNS and TLS default 15s, other protocols default 120s, [Documentation](../configuration/agent/#processors.request_log.timeouts.session_aggregate).
    - **Unknown**: When concurrent requests exceed the collector's cache capacity, the oldest requests are marked as unknown.
      - Collector `Session Aggregate Max Entries` setting: Default cache of 64K requests, [Documentation](../configuration/agent/#processors.request_log.tunning.session_aggregate_max_entries).
    - **Parse Failed**: Response was collected but the response code could not be parsed due to truncation or compression.
      - Collector `Payload Truncation` setting: Default parses the first 1024 bytes of Payload, [Documentation](../configuration/agent/#processors.request_log.tunning.payload_truncation).

## Code Observability

- Usability improvements
  - Collect `Java/Python` OnCPU profiling data by default.
  - Collect `deepflow-*` OnCPU profiling data by default.

# Infrastructure

## Asset Observability

- ⭐ Added asset observability feature, supporting viewing observability data from the perspective of cloud hosts and container resources.

## Network Observability

- Changed the end status (`close_type`) of non-TCP traffic in network flow logs from timeout to normal end (1).
- Changed the default unit for all traffic rates on the page from bytes per second (`Bps`) to bits per second (`bps`).

## Traffic Distribution

- Distribution strategy supports specifying collector groups.

# Customization

## Dashboards

- When using PromQL queries, support setting metric aliases, units, and thresholds.

# Others

## Resource List

- AutoTagging
  - Process resources
    - ⭐ Automatically record gprocess name as jar/py file name to avoid all showing as java/python.
    - Aggregate processes with the same `cmdline` within the same cloud host or the same K8s workload into a unique gprocess to reduce redundant process information.
    - Optimized default values for process matcher, [Documentation](../configuration/agent/#inputs.proc.process_matcher).
      - By default, ignore collection of `sleep/sh/bash/pause/runc` process information.
      - By default, collect process information for `Java/Python`.
      - By default, collect process information for `deepflow-*`.
      - By default, collect process information in containers.
  - Support for collecting and associating change events of K8s resource definitions and ConfigMaps.
- Usability improvements
  - ⭐ Performance: Added KV search capability to list pages to improve search experience in large-scale resource scenarios with millions of entries.
  - Added ID column to VPC resource list to align with cloud platforms.
  - When entering a peering connection, VPC can be left empty to establish peering with all VPCs under the specified cloud platform.

## System Management

- Server
  - ⭐ Support for MCP Server.
  - ⭐ Support for defining indexes for fields such as attribute.X, metrics.X to speed up retrieval of commonly used fields.
  - Support for terminating remote upgrades of collectors and optimizing CPU resource usage of Server during upgrades.
  - Support for setting maximum query duration to avoid excessive resource consumption for large time-scale queries.
- Agent
  - ⭐ OneAgent: Support for using deepflow-agent to collect application logs, host system metrics, and K8s container system metrics.
  - ⭐ OneAgent: Support for using deepflow-agent for continuous probing.
  - ⭐ Security: Support for limiting the number of Sockets used by deepflow-agent, [Documentation](../configuration/agent/#global.limits.max_sockets).
  - ⭐ Adaptability: Support for collecting traffic from Pod internal NICs, suitable for scenarios where Pod NIC traffic cannot be directly collected under the Root network namespace (e.g., [Huawei Cloud CCE Turbo CNI](https://support.huaweicloud.com/usermanual-cce/cce_10_0284.html)), [Documentation](../configuration/agent/#inputs.cbpf.af_packet.inner_interface_capture_enabled).
  - ⭐ Performance: Support for compressed transmission of PCAP data, with compression ratio up to 5:1 ~ 10:1, [Documentation](../configuration/agent/#outputs.compression.pcap).
  - ⭐ Performance: Support for compressed sending of call logs and flow logs, with call log compression ratio up to 8:1 in test environments, [Documentation](../configuration/agent/#outputs.compression.l7_flow_log).
  - ⭐ Performance: Optimized memory usage of Cache for application performance metrics in Agent by timely cleaning up expired LRU entries, reducing overall memory consumption by **43%** in test environments.
  - ⭐ Performance: Aggregate and store flow logs generated by LB health checks, reducing flow log storage overhead by nearly **50%** in a production environment, [Documentation](../configuration/agent/#outputs.flow_log.aggregators.aggregate_health_check_l4_flow_log).
  - ⭐ Performance: Improved call log merge success rate on the agent side, significantly reducing the proportion of `response_status = Unknown` call logs, with a 50% reduction in unknown rate observed in test environments.
  - ⭐ Support for collecting virtual and physical NIC traffic on non-Open vSwitch DPDK KVM hosts, [Documentation](../configuration/agent/#inputs.ebpf.socket.uprobe.dpdk.command).
  - Adapted to K8s CNI with identical MAC addresses for virtual NICs on the same host.
  - Optimized resource overhead protection mechanism when application protocol recognition fails to avoid mistakenly disabling application protocol parsing, [Documentation](../configuration/agent/#processors.request_log.application_protocol_inference.inference_max_retries).
  - Collector list supports displaying associated VPC information.
  - Limit agent data sending bandwidth consumption, default allowing 100Mbps, [Documentation](../configuration/agent/#global.communication.max_throughput_to_ingester).
  - When agent traffic reaches the rate limit, support choosing between `drop` or `wait` strategies; default is drop, can be configured to wait to improve data sending success rate, [Documentation](../configuration/agent/#global.communication.ingester_traffic_overflow_action).
  - Added circuit breaker mechanism for free disk space in Agent runtime environment, [Documentation](../configuration/agent/#global.circuit_breakers.free_disk).
  - Support for disabling Agent use of Swap memory, [Documentation](../configuration/agent/#global.tunning.swap_disabled).
  - Optimization: Reduced work performed by Agent when in disabled state.